# 상관관계 분석 방법론

이 문서는 학생 건강검사 데이터 분석 대시보드에서 사용하는 당뇨 위험 요인과 혈당치 간의 상관관계 분석 방법론을 설명합니다.

## 기본 상관관계 분석

본 프로젝트에서는 Pearson 상관계수를 사용하여 혈당치와 다양한 생체지표 및 생활습관 요인 간의 상관관계를 분석합니다.

### Pearson 상관계수

Pearson 상관계수는 두 변수 간의 선형 상관관계를 나타내는 통계량으로, -1에서 1 사이의 값을 갖습니다:
- **1에 가까울수록**: 강한 양의 상관관계 (한 변수가 증가할 때 다른 변수도 증가)
- **0에 가까울수록**: 상관관계 없음
- **-1에 가까울수록**: 강한 음의 상관관계 (한 변수가 증가할 때 다른 변수는 감소)

```python
import pandas as pd
import numpy as np

# 데이터셋의 상관행렬 계산
correlation_matrix = df[numeric_cols].corr()

# 혈당치와의 상관관계만 추출
glucose_correlation = correlation_matrix['혈당치_mgdL'].sort_values(ascending=False)
```

## 회귀 분석을 통한 영향력 평가

단순 상관관계를 넘어, 다중 회귀 분석을 사용하여 각 요인이 혈당치에 미치는 독립적인 영향력을 평가합니다.

### 다중 선형 회귀 모델

```python
import statsmodels.api as sm

# 회귀 분석을 위한 변수 선택
X_vars = [
    'BMI', '라면', '음료수', '패스트푸드',
    '주3회이상운동', '하루30분이상운동',
    'TV시청2시간이상', '게임2시간이상'
]

# 회귀 모델 적합
X = sm.add_constant(df[X_vars])  # 상수항 추가
y = df['혈당치_mgdL']
model = sm.OLS(y, X).fit()

# 결과 해석
coefficients = model.params      # 회귀 계수
p_values = model.pvalues         # 통계적 유의성
r_squared = model.rsquared       # 모델 설명력
```

## 해석 방법

### 계수 해석
회귀 계수는 다른 모든 변수가 일정할 때 해당 변수가 1단위 증가할 때 혈당치가 얼마나 변화하는지를 의미합니다:
- **양수 계수**: 변수 증가가 혈당치 증가와 관련
- **음수 계수**: 변수 증가가 혈당치 감소와 관련

### 통계적 유의성
p-value < 0.05인 경우 해당 변수의 영향이 통계적으로 유의미하다고 판단합니다.

## 시각화 방법

본 대시보드에서는 상관관계와 회귀 분석 결과를 다음과 같이 시각화합니다:

1. **상관관계 히트맵**: 다양한 요인과 혈당치 간의 상관관계를 색상 강도로 표현
2. **회귀 계수 바 차트**: 각 요인의 영향력 크기와 방향을 나타내는 바 차트
3. **통계적 유의성**: 유의미한 요인은 더 진한 색상으로 강조

## 주요 발견 사항

일반적으로 데이터에서 관찰되는 패턴:

1. **신체 계측치 관련**:
   - BMI와 혈당치 간의 양의 상관관계 (+0.3 ~ +0.5)
   - 허리둘레와 혈당치 간의 양의 상관관계 (+0.2 ~ +0.4)

2. **식습관 관련**:
   - 패스트푸드, 라면, 음료수 섭취와 혈당치 간의 양의 상관관계 (+0.1 ~ +0.3)
   - 과일, 우유유제품 섭취와 혈당치 간의 약한 음의 상관관계 (-0.1 ~ -0.2)

3. **활동 관련**:
   - 규칙적인 운동(주3회이상)과 혈당치 간의 음의 상관관계 (-0.2 ~ -0.3)
   - 장시간 미디어 사용과 혈당치 간의 약한 양의 상관관계 (+0.1 ~ +0.2)

## 한계점

본 분석 방법의 한계점:

1. **인과관계 추론의 한계**: 상관관계가 반드시 인과관계를 의미하지는 않음
2. **교란 변수의 가능성**: 모델에 포함되지 않은 다른 요인들의 영향 존재
3. **선형성 가정**: 실제 관계는 비선형적일 수 있음
4. **표본 대표성**: 분석 대상 학생들이 전체 학생 집단을 대표하지 않을 수 있음

## 활용 방안

분석 결과는 다음과 같이 활용할 수 있습니다:

1. **개인 맞춤형 예방 조언**: 각 학생의 프로필에 기반한 생활습관 개선 제안
2. **학교 건강 프로그램 설계**: 데이터에 기반한 효과적인 건강 증진 프로그램 개발
3. **학부모 교육**: 자녀의 건강한 생활습관 형성을 위한 가이드라인 제공
4. **정책 제안**: 청소년 당뇨 예방을 위한 정책 개발 시 근거 자료로 활용